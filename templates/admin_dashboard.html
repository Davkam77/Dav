<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body style="background: url('{{ background }}') no-repeat center center fixed; background-size: cover; color: white; font-family: Rubik, sans-serif;">

    <div style="text-align: right; margin-bottom: 10px;">
        <a href="/logout" class="logout-button">üö™ –í—ã–π—Ç–∏</a>
    </div>

    <div style="background: rgba(0,0,0,0.7); margin: 40px auto; max-width: 900px; padding: 40px; border-radius: 15px;">

        <h1 style="color: cyan;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –ê–¥–º–∏–Ω!</h1>
        <p>üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Å–∞–π—Ç–æ–º:</p>

        <h3 style="color: lime;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</h3>
        <ul>
            {% for user in users %}
                <li>
                    üë§ {{ user.username }} ‚Äî {{ user.role }}
                    <form method="post" action="/admin/delete_user/{{ user.id }}" style="display:inline;">
                        <button onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?')" style="background: red; color: white; border: none; padding: 2px 6px; margin-left: 10px;">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </li>
            {% endfor %}
        </ul>

        <h3 style="color: orange;">üü¢ –û–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</h3>
        <ul>
            {% if online_users %}
                {% for u in online_users %}
                    <li>üëÄ {{ u }}</li>
                {% endfor %}
            {% else %}
                <li>‚Äî –ù–∏–∫—Ç–æ –Ω–µ –æ–Ω–ª–∞–π–Ω</li>
            {% endif %}
        </ul>

        <h2 style="margin-top: 30px;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</h2>
        <table style="width:100%; margin-top: 10px; background: rgba(255,255,255,0.1); color: white; border-collapse: collapse;">
            <tr style="border-bottom: 1px solid #ccc;">
                <th style="padding: 10px;">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                <th style="padding: 10px;">üõ†Ô∏è –í–∑—è—Ç–æ</th>
                <th style="padding: 10px;">‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ</th>
            </tr>
            {% for row in analytics %}
            <tr style="border-bottom: 1px solid #444;">
                <td style="padding: 10px;">{{ row.username }}</td>
                <td style="padding: 10px;">{{ row.taken }}</td>
                <td style="padding: 10px;">{{ row.done }}</td>
            </tr>
            {% endfor %}
        </table>

        <h3 style="margin-top: 30px;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)</h3>
        <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏ API, —Ç–µ–º–∞–º–∏ –∏ –¥–æ—Å—Ç—É–ø–∞–º–∏.</p>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script>
        const socket = io();
    </script>
</body>
</html>
